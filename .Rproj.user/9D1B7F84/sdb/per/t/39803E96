{
    "collab_server" : "",
    "contents" : "## This script runs Hysplit after downloading met data and looks for the data\n## in certain folders specified within the function\n## \n## Author: Yusri Yusup\n## Date modified: 2017-05-15\n\n# Load packages\nlibrary(openair)\nlibrary(mapdata) # To use hi-res maps\nlibrary(mapproj)\n\nsource('R/hysplit_run/procTraj.R')\nsource('R/hysplit_run/read.files.R')\nsource('R/hysplit_run/getMet.R')\nsource('R/hysplit_run/add.met.R')\n\n# Download the data, commented out so that the data is not downloaded again\ngetMet(year=2016,month=11)\n\n# Run Hysplit, this function changes the working directory.\n# Need to change lat, long, name, hours, and height\nfor(i in 2016){\n  procTraj(lat=3.168434,lon=101.701301,year=i,\n           name='kl',hours=72,height=500,\n           met='/Users/Yusri/Documents/Work/Data_analysis/pnc_ukm/data/TrajData/',\n           out='/Users/Yusri/Documents/Work/Data_analysis/pnc_ukm/data/TrajProc/')\n}\n# Reset working directory\nsetwd('/Users/Yusri/Documents/Work/Data_analysis/pnc_ukm/')\n# Import data\ntrajKL<-importTraj(site='kl',year=2016,local='data/TrajProc/')\n\n\ntrajLevel(trajKL, projection = 'mercator', orientation = c(90,90,0),\n          parameters=NULL,map.res = 'hires',statistic = 'cwt')\n\n# Trajectory plots\ntrajPlot(selectByDate(subset(trajKL,lat > 0 & lat < 10 & lon > 95 & lon < 105),\n                      start='20/6/2012',end='20/6/2012'),\n         orientation=c(90,90,0),projection='mercator',\n         parameters=NULL,map.res = 'hires')\n\ntrajPlot(subset(usmt),orientation = c(90,90,0),\n         plot.type='l',projection = 'mercator',\n         parameters=NULL,pollutant = 'pm10',map.res='hires',type='monsoon')\n\ntrajLevel(s18t,orientation = c(90,90,0),projection = 'mercator',\n          parameters=NULL,pollutant = 'Cd',map.res='hires')\n\ntrajLevel(trajPenang,statistic='frequency',col='increment',projection='mercator',\n          parameters=NULL)\n\ntrajLevel(subset(trajPenang,lat > 0 & lat < 10 & lon > 95 & lon < 105),\n          col='increment',orientation=c(90,90,0),method='hexbin',statistic='difference',\n          projection='mercator',parameters=NULL,map.res='hires',grid.col='black')\n\ntrajLevel(s18t,pollutant='pm10',statistic='frequency',orientation = c(90,90,0))\n\ntrajLevel(s18t,pollutant='pm10',statistic='difference',orientation=c(90,90,0),\n          map.res='hires')\n\n# Trajectory plot with factors\n#### S18 ####\n# Factor 1: Mn-Fe-Cd\ntrajPlot(s18t,pollutant = 'f_metal1',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 2: Pb-Ca\ntrajPlot(s18t,pollutant = 'f_metal2',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 3: Ni-Zn\ntrajPlot(s18t,pollutant = 'f_metal3',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 4: Mg-Cu\ntrajPlot(s18t,pollutant = 'f_metal4',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n\n#### USM ####\n# Factor 1: Mn-Fe-Cd\ntrajPlot(usmt,pollutant = 'f_metal1',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 2: Pb-Ca\ntrajPlot(usmt,pollutant = 'f_metal2',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 3: Ni-Zn\ntrajPlot(usmt,pollutant = 'f_metal3',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)\n# Factor 4: Mg-Cu\ntrajPlot(usmt,pollutant = 'f_metal4',\n         map.res = 'hires', projection = 'mercator',parameters=NULL,\n         grid.col = 'black',lwd=2)",
    "created" : 1494857616660.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3428845550",
    "id" : "39803E96",
    "lastKnownWriteTime" : 1494862494,
    "last_content_update" : 1494862494784,
    "path" : "~/Documents/Work/Data_analysis/pnc_ukm/R/hysplit_run/run_hysplit.R",
    "project_path" : "R/hysplit_run/run_hysplit.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}